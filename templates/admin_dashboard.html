{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container-fluid py-4">
  <h2 class="fw-bold mb-4 text-gradient">ðŸ›  Admin Dashboard</h2>

  <!-- ===== Summary Cards ===== -->
  <div class="row g-4 mb-5">
    <div class="col-md-3">
      <div class="card shadow-sm border-0 bg-primary text-white">
        <div class="card-body text-center">
          <h3>{{ users|length }}</h3>
          <p class="mb-0">Total Users</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm border-0 bg-success text-white">
        <div class="card-body text-center">
          <h3>{{ bookings|length }}</h3>
          <p class="mb-0">Total Bookings</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm border-0 bg-warning text-dark">
        <div class="card-body text-center">
          <h3>{{ rentals|length }}</h3>
          <p class="mb-0">Car Rentals</p>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card shadow-sm border-0 bg-danger text-white">
        <div class="card-body text-center">
          <h3>{{ package_bookings|length }}</h3>
          <p class="mb-0">Package Bookings</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== Users ===== -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <h5 class="mb-0"><i class="bi bi-people-fill me-2"></i>All Users</h5>
    </div>
    <div class="table-responsive">
      <table class="table table-hover align-middle text-center mb-0">
        <thead class="table-light">
          <tr><th>ID</th><th>Name</th><th>Email</th></tr>
        </thead>
        <tbody>
          {% for u in users %}
          <tr><td>{{ u.id }}</td><td>{{ u.name }}</td><td>{{ u.email }}</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- ===== Bookings ===== -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-success text-white">
      <h5 class="mb-0"><i class="bi bi-airplane-engines-fill me-2"></i>All Bookings</h5>
    </div>
    <div class="table-responsive">
      <table class="table table-hover align-middle text-center mb-0">
        <thead class="table-light">
          <tr><th>User</th><th>Type</th><th>From</th><th>To</th><th>Date</th></tr>
        </thead>
        <tbody>
          {% for b in bookings %}
          <tr>
            <td>{{ b.user_email }}</td>
            <td>{{ b.booking_type }}</td>
            <td>{{ b.source }}</td>
            <td>{{ b.destination }}</td>
            <td>{{ b.travel_date }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- ===== Car Rentals ===== -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-warning text-dark">
      <h5 class="mb-0"><i class="bi bi-car-front-fill me-2"></i>All Car Rentals</h5>
    </div>
    <div class="table-responsive">
      <table class="table table-hover align-middle text-center mb-0">
        <thead class="table-light">
          <tr><th>User</th><th>Car Type</th><th>Pickup</th><th>Start</th><th>End</th></tr>
        </thead>
        <tbody>
          {% for r in rentals %}
          <tr>
            <td>{{ r.user_email }}</td>
            <td>{{ r.car_type }}</td>
            <td>{{ r.pickup_location }}</td>
            <td>{{ r.start_date }}</td>
            <td>{{ r.end_date }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- ===== Package Bookings ===== -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-danger text-white">
      <h5 class="mb-0"><i class="bi bi-gift-fill me-2"></i>All Package Bookings</h5>
    </div>
    <div class="table-responsive">
      <table class="table table-hover align-middle text-center mb-0">
        <thead class="table-light">
          <tr><th>User</th><th>Package</th><th>Booking Date</th><th>Booked At</th></tr>
        </thead>
        <tbody>
          {% for p in package_bookings %}
          <tr>
            <td>{{ p.user_email }}</td>
            <td>{{ p.package_name }}</td>
            <td>{{ p.booking_date }}</td>
            <td>{{ p.created_at }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- ===== Contact Messages ===== -->
  <div class="card shadow-sm mb-5">
    <div class="card-header bg-info text-white">
      <h5 class="mb-0"><i class="bi bi-chat-dots-fill me-2"></i>Contact Messages</h5>
    </div>
    <div class="table-responsive">
      <table class="table table-hover align-middle text-center mb-0">
        <thead class="table-light">
          <tr><th>Name</th><th>Email</th><th>Message</th><th>Created At</th></tr>
        </thead>
        <tbody>
          {% for c in contacts %}
          <tr>
            <td>{{ c.name }}</td>
            <td>{{ c.email }}</td>
            <td>{{ c.message }}</td>
            <td>{{ c.created_at }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ðŸ’« Small animation -->
<style>
  .card {
    animation: fadeUp 0.5s ease-in-out;
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
{% endblock %}